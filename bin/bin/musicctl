#!/bin/bash

# Pianobar or mpd?
get_player() {
    if pidof pianobar >/dev/null
    then player=pianoctl 
    elif pidof mpd >/dev/null
    then player=mpc
    else exit 1
    fi
    export $player
}

toggle_pause() {
   if [ "$player" == "pianoctl" ]
   then pianoctl p
   elif [ "$player" == "mpc" ]
   then mpc toggle
   else exit 1
   fi
}

back() {
   if [ "$player" == "pianoctl" ]
   then pianoctl + 
   elif [ "$player" == "mpc" ]
   then mpc prev
   else exit 1
   fi
}

next() {
   if [ "$player" == "pianoctl" ]
   then pianoctl \-
   elif [ "$player" == "mpc" ]
   then mpc next
   else exit 1
   fi
}

stop() {
   if [ "$player" == "pianoctl" ]
   then pianoctl q
   elif [ "$player" == "mpc" ]
   then mpc stop
   else exit 1
   fi
}


case "$1" in
    pause)
        get_player
        toggle_pause
        ;;
    back)
        get_player
        back
        ;;
    next)
        get_player
        next
        ;;
   stop)
        get_player
        stop
        ;;
    *)
        echo "Usage: $0 {pause|back|next}"
        exit 1
        ;;
esac
